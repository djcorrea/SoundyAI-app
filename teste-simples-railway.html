<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>ğŸš€ Teste Simples - Railway</title>
    <style>
        body { font-family: monospace; background: #222; color: #fff; padding: 20px; }
        .log { background: #333; padding: 10px; margin: 5px 0; border-radius: 4px; }
        .error { background: #d33; }
        .success { background: #3d3; color: #000; }
        .info { background: #33d; }
        button { background: #4a90e2; color: white; border: none; padding: 10px; margin: 5px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>ğŸš€ Teste Simples Railway - SoundyAI</h1>
    <button onclick="testeBasico()">ğŸ” Teste BÃ¡sico</button>
    <button onclick="limpar()">ğŸ§¹ Limpar</button>
    
    <div id="logs"></div>

    <!-- DependÃªncias -->
    <script src="suggestion-scorer.js"></script>
    <script src="enhanced-suggestion-engine.js"></script>

    <script>
        function log(tipo, mensagem) {
            const div = document.createElement('div');
            div.className = `log ${tipo}`;
            div.innerHTML = `<strong>[${new Date().toLocaleTimeString()}]</strong> ${mensagem}`;
            document.getElementById('logs').appendChild(div);
            console.log(`[${tipo}] ${mensagem}`);
        }

        function testeBasico() {
            limpar();
            log('info', 'ğŸ” Iniciando teste bÃ¡sico...');
            
            try {
                // Verificar SuggestionScorer
                if (typeof SuggestionScorer === 'undefined') {
                    log('error', 'âŒ SuggestionScorer nÃ£o encontrado');
                    return;
                }
                log('success', 'âœ… SuggestionScorer encontrado');
                
                // Verificar EnhancedSuggestionEngine
                if (typeof EnhancedSuggestionEngine === 'undefined') {
                    log('error', 'âŒ EnhancedSuggestionEngine nÃ£o encontrado');
                    return;
                }
                log('success', 'âœ… EnhancedSuggestionEngine encontrado');
                
                // Tentar criar engine
                const engine = new EnhancedSuggestionEngine();
                log('success', 'âœ… Engine criado com sucesso');
                
                // Dados de teste mÃ­nimos
                const testAnalysis = {
                    technicalData: {
                        lufsIntegrated: -14.5,
                        truePeakDbtp: -1.5
                    }
                };
                
                const testReference = {
                    lufs_target: -14.0,
                    lufs_tolerance: 1.0,
                    true_peak_target: -1.0,
                    true_peak_tolerance: 0.5
                };
                
                // Processar
                log('info', 'ğŸµ Processando teste...');
                const resultado = engine.processAnalysis(testAnalysis, testReference);
                
                log('success', `âœ… Processamento OK - ${resultado.suggestions?.length || 0} sugestÃµes`);
                
                if (resultado.suggestions && resultado.suggestions.length > 0) {
                    log('success', `ğŸ¯ Primeira sugestÃ£o: ${resultado.suggestions[0].description || 'N/A'}`);
                } else {
                    log('info', 'âš ï¸ Nenhuma sugestÃ£o gerada (pode ser normal para dados simples)');
                }
                
                // Salvar para debug global
                window.__TESTE_RESULTADO = resultado;
                log('info', 'ğŸ’¾ Resultado salvo em window.__TESTE_RESULTADO');
                
            } catch (error) {
                log('error', `ğŸ’¥ ERRO: ${error.message}`);
                console.error('Erro completo:', error);
            }
        }

        function limpar() {
            document.getElementById('logs').innerHTML = '';
        }

        // Auto-teste quando carregar
        window.addEventListener('load', () => {
            setTimeout(() => {
                log('info', 'ğŸŒ PÃ¡gina carregada - executando auto-teste...');
                testeBasico();
            }, 500);
        });
    </script>
</body>
</html>