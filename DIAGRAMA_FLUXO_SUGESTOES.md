# ğŸ“Š Diagrama de Fluxo - Sistema de SugestÃµes SoundyAI

## ğŸ”„ Fluxo Atual (COM BUG)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         1. ANÃLISE DE ÃUDIO                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    2. BACKEND - CÃ¡lculo de MÃ©tricas                     â”‚
â”‚  Arquivo: work/api/audio/pipeline-complete.js                          â”‚
â”‚                                                                         â”‚
â”‚  LUFS: -10.5   TruePeak: -1.0   DR: 8.5   Bands: {...}               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           3. BACKEND - GeraÃ§Ã£o de SugestÃµes (problems-suggestions-v2)  â”‚
â”‚  Arquivo: work/lib/audio/features/problems-suggestions-v2.js           â”‚
â”‚                                                                         â”‚
â”‚  Para cada mÃ©trica:                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ 1. Calcular diff (distÃ¢ncia ao range)                    â”‚         â”‚
â”‚  â”‚    â€¢ Se dentro do range: diff = 0                        â”‚         â”‚
â”‚  â”‚    â€¢ Se fora do range: diff = valor - borda             â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ 2. Calcular severity (classifyMetric)                    â”‚         â”‚
â”‚  â”‚    â€¢ diff = 0         â†’ severity.level = 'ok'           â”‚         â”‚
â”‚  â”‚    â€¢ diff â‰¤ tolerance â†’ severity.level = 'ok'           â”‚         â”‚
â”‚  â”‚    â€¢ diff â‰¤ 2Ã—tol    â†’ severity.level = 'attention'     â”‚         â”‚
â”‚  â”‚    â€¢ diff > 2Ã—tol    â†’ severity.level = 'critical'      â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ 3. Criar objeto suggestion                               â”‚         â”‚
â”‚  â”‚    { metric, severity, message, delta, ... }            â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ 4. âŒ BUG AQUI: SEMPRE FAZ PUSH                         â”‚         â”‚
â”‚  â”‚    suggestions.push(suggestion)                          â”‚         â”‚
â”‚  â”‚    â†‘                                                     â”‚         â”‚
â”‚  â”‚    Deveria ter: if (severity.level !== 'ok')           â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                         â”‚
â”‚  Resultado:                                                            â”‚
â”‚  suggestions = [                                                       â”‚
â”‚    { metric: 'lufs', severity: {level: 'ok'}, ... },        â† BUG!   â”‚
â”‚    { metric: 'truePeak', severity: {level: 'ok'}, ... },    â† BUG!   â”‚
â”‚    { metric: 'dr', severity: {level: 'ok'}, ... },          â† BUG!   â”‚
â”‚    { metric: 'stereo', severity: {level: 'ok'}, ... },      â† BUG!   â”‚
â”‚    { metric: 'band_sub', severity: {level: 'ok'}, ... },    â† BUG!   â”‚
â”‚    { metric: 'band_low_bass', severity: {level: 'ok'}, ... }â† BUG!   â”‚
â”‚    // ... mais 2-3 bandas com severity 'ok'                           â”‚
â”‚  ]                                                                     â”‚
â”‚  Total: 8-12 sugestÃµes (TODAS com severity 'ok' se tudo estÃ¡ bem)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 4. BACKEND - AI Enrichment (opcional)                   â”‚
â”‚  Arquivo: work/lib/ai/suggestion-enricher.js                          â”‚
â”‚                                                                         â”‚
â”‚  âŒ NÃƒO FILTRA - apenas enriquece as sugestÃµes com contexto IA        â”‚
â”‚                                                                         â”‚
â”‚  suggestions.map(sug => ({                                             â”‚
â”‚    ...sug,                                                             â”‚
â”‚    aiEnhanced: true,                                                   â”‚
â”‚    educationalNote: "...",                                             â”‚
â”‚    practicalSteps: [...]                                               â”‚
â”‚  }))                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      5. JSON RETORNADO AO FRONTEND                      â”‚
â”‚                                                                         â”‚
â”‚  {                                                                     â”‚
â”‚    metrics: { lufs: -10.5, truePeak: -1.0, dr: 8.5, ... },          â”‚
â”‚    bands: { sub: -28.5, low_bass: -28, ... },                        â”‚
â”‚    suggestions: [                                                      â”‚
â”‚      { metric: 'lufs', severity: {level: 'ok', label: 'OK'}, ... },  â”‚
â”‚      { metric: 'truePeak', severity: {level: 'ok'}, ... },           â”‚
â”‚      { metric: 'dr', severity: {level: 'ok'}, ... },                 â”‚
â”‚      // ... 8-12 sugestÃµes TODAS 'ok'                                 â”‚
â”‚    ],                                                                  â”‚
â”‚    genreTargets: { lufs: {...}, bands: {...} }                       â”‚
â”‚  }                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  6. FRONTEND - RenderizaÃ§Ã£o da Tabela                   â”‚
â”‚  Arquivo: public/audio-analyzer-integration.js                         â”‚
â”‚  FunÃ§Ã£o: renderGenreComparisonTable() - linha 6860                     â”‚
â”‚                                                                         â”‚
â”‚  Para cada mÃ©trica:                                                    â”‚
â”‚  1. LÃª metrics e genreTargets                                          â”‚
â”‚  2. Calcula se estÃ¡ dentro do range                                    â”‚
â”‚  3. Aplica classe CSS:                                                 â”‚
â”‚     â€¢ Dentro do range â†’ classe 'ok' (verde)                           â”‚
â”‚     â€¢ Fora do range â†’ classe 'warn' ou 'yellow'                       â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  TABELA RENDERIZADA:                                 â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚             â”‚
â”‚  â”‚  â”‚ MÃ©trica    â”‚ Valor   â”‚ Alvo      â”‚ Status â”‚       â”‚             â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚             â”‚
â”‚  â”‚  â”‚ LUFS       â”‚ -10.5   â”‚ -11 a -9  â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ True Peak  â”‚ -1.0    â”‚ -2 a -0.5 â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ DR         â”‚ 8.5     â”‚ 7.5 a 9.5 â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ Stereo     â”‚ 0.9     â”‚ 0.8 a 1.0 â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ Subgrave   â”‚ -28.5   â”‚ -32 a -25 â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ Grave      â”‚ -28     â”‚ -31 a -25 â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                         â”‚
â”‚  âœ… TABELA CORRETA: Mostra verde para tudo que estÃ¡ OK                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  7. FRONTEND - RenderizaÃ§Ã£o do Modal                    â”‚
â”‚  Arquivo: public/audio-analyzer-integration.js                         â”‚
â”‚  FunÃ§Ã£o: displayModalResults() - linha 11778                           â”‚
â”‚                                                                         â”‚
â”‚  âŒ NÃƒO FILTRA suggestions por severity                                â”‚
â”‚  Simplesmente renderiza: analysis.suggestions.forEach(...)             â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  MODAL RENDERIZADO (BUG!):                           â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚             â”‚
â”‚  â”‚  â”‚ ğŸ“Š SugestÃµes de Mixagem                   â”‚       â”‚             â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚             â”‚
â”‚  â”‚  â”‚ ğŸŸ¢ LUFS - Ideal                           â”‚  â† BUG!              â”‚
â”‚  â”‚  â”‚ Seu valor: -10.5 LUFS                     â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ Faixa ideal: -11 a -9 LUFS                â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ âœ… Excelente!                             â”‚       â”‚             â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚             â”‚
â”‚  â”‚  â”‚ ğŸŸ¢ True Peak - Ideal                      â”‚  â† BUG!              â”‚
â”‚  â”‚  â”‚ Seu valor: -1.0 dBTP                      â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ âœ… Excelente!                             â”‚       â”‚             â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚             â”‚
â”‚  â”‚  â”‚ ğŸŸ¢ Dynamic Range - Ideal                  â”‚  â† BUG!              â”‚
â”‚  â”‚  â”‚ Seu valor: 8.5 dB                         â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ âœ… Excelente!                             â”‚       â”‚             â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚             â”‚
â”‚  â”‚  â”‚ [... mais 5-9 cards "Ideal" ...]          â”‚  â† BUG!              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                         â”‚
â”‚  âŒ MODAL BUGADO: Mostra 8-12 cards "Ideal" mesmo tudo estando OK!    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           8. DIVERGÃŠNCIA                                â”‚
â”‚                                                                         â”‚
â”‚  Tabela:  Tudo ğŸŸ¢ OK (correto)                                         â”‚
â”‚  Modal:   8-12 cards "Ideal" (incorreto - deveria ter 0)              â”‚
â”‚                                                                         â”‚
â”‚  âŒ EXPERIÃŠNCIA DO USUÃRIO:                                            â”‚
â”‚  "Por que a tabela diz que estÃ¡ tudo OK mas o modal mostra            â”‚
â”‚   vÃ¡rias sugestÃµes?"                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Fluxo Corrigido (SOLUÃ‡ÃƒO)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         1-2. [IGUAL AO ATUAL]                           â”‚
â”‚                    AnÃ¡lise de Ã¡udio + CÃ¡lculo de mÃ©tricas               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           3. BACKEND - GeraÃ§Ã£o de SugestÃµes (CORRIGIDO)                â”‚
â”‚  Arquivo: work/lib/audio/features/problems-suggestions-v2.js           â”‚
â”‚                                                                         â”‚
â”‚  Para cada mÃ©trica:                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ 1. Calcular diff (distÃ¢ncia ao range)                    â”‚         â”‚
â”‚  â”‚    â€¢ Se dentro do range: diff = 0                        â”‚         â”‚
â”‚  â”‚    â€¢ Se fora do range: diff = valor - borda             â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ 2. Calcular severity (classifyMetric)                    â”‚         â”‚
â”‚  â”‚    â€¢ diff = 0         â†’ severity.level = 'ok'           â”‚         â”‚
â”‚  â”‚    â€¢ diff â‰¤ tolerance â†’ severity.level = 'ok'           â”‚         â”‚
â”‚  â”‚    â€¢ diff â‰¤ 2Ã—tol    â†’ severity.level = 'attention'     â”‚         â”‚
â”‚  â”‚    â€¢ diff > 2Ã—tol    â†’ severity.level = 'critical'      â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ 3. Criar objeto suggestion                               â”‚         â”‚
â”‚  â”‚    { metric, severity, message, delta, ... }            â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ 4. âœ… FIX: GATE ANTES DO PUSH                           â”‚         â”‚
â”‚  â”‚                                                          â”‚         â”‚
â”‚  â”‚    if (severity.level !== 'ok') {                       â”‚         â”‚
â”‚  â”‚      suggestions.push(suggestion);                       â”‚         â”‚
â”‚  â”‚    }                                                     â”‚         â”‚
â”‚  â”‚    â†‘                                                     â”‚         â”‚
â”‚  â”‚    SÃ³ adiciona se NÃƒO for 'ok'                          â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                         â”‚
â”‚  Resultado:                                                            â”‚
â”‚  suggestions = []  â† Array VAZIO se tudo estÃ¡ OK!                     â”‚
â”‚                                                                         â”‚
â”‚  Ou se houver problema:                                                â”‚
â”‚  suggestions = [                                                       â”‚
â”‚    { metric: 'band_low_bass', severity: {level: 'critical'}, ... }   â”‚
â”‚  ]                                                                     â”‚
â”‚  Total: 0-N sugestÃµes (APENAS problemas reais)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      4-5. [IGUAL AO ATUAL]                              â”‚
â”‚                AI Enrichment + JSON retornado                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  6. FRONTEND - RenderizaÃ§Ã£o da Tabela                   â”‚
â”‚                         [IGUAL AO ATUAL]                                â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  TABELA RENDERIZADA:                                 â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚             â”‚
â”‚  â”‚  â”‚ MÃ©trica    â”‚ Valor   â”‚ Alvo      â”‚ Status â”‚       â”‚             â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚             â”‚
â”‚  â”‚  â”‚ LUFS       â”‚ -10.5   â”‚ -11 a -9  â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ True Peak  â”‚ -1.0    â”‚ -2 a -0.5 â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ DR         â”‚ 8.5     â”‚ 7.5 a 9.5 â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ Stereo     â”‚ 0.9     â”‚ 0.8 a 1.0 â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ Subgrave   â”‚ -28.5   â”‚ -32 a -25 â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ Grave      â”‚ -28     â”‚ -31 a -25 â”‚ ğŸŸ¢ OK  â”‚       â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                         â”‚
â”‚  âœ… TABELA: Mostra verde para tudo que estÃ¡ OK                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  7. FRONTEND - RenderizaÃ§Ã£o do Modal                    â”‚
â”‚                                                                         â”‚
â”‚  analysis.suggestions.length === 0  â† Array vazio!                     â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  MODAL RENDERIZADO (CORRIGIDO):                      â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚             â”‚
â”‚  â”‚  â”‚ ğŸ‰ Sua mixagem estÃ¡ perfeita!             â”‚       â”‚             â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚             â”‚
â”‚  â”‚  â”‚                                           â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ âœ… Todas as mÃ©tricas estÃ£o dentro do     â”‚       â”‚             â”‚
â”‚  â”‚  â”‚    range ideal para o estilo escolhido.  â”‚       â”‚             â”‚
â”‚  â”‚  â”‚                                           â”‚       â”‚             â”‚
â”‚  â”‚  â”‚ NÃ£o hÃ¡ ajustes necessÃ¡rios no momento.   â”‚       â”‚             â”‚
â”‚  â”‚  â”‚                                           â”‚       â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                         â”‚
â”‚  âœ… MODAL CORRETO: 0 cards quando tudo estÃ¡ OK                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           8. ALINHAMENTO âœ…                             â”‚
â”‚                                                                         â”‚
â”‚  Tabela:  Tudo ğŸŸ¢ OK (correto)                                         â”‚
â”‚  Modal:   Mensagem de sucesso, 0 sugestÃµes (correto!)                 â”‚
â”‚                                                                         â”‚
â”‚  âœ… EXPERIÃŠNCIA DO USUÃRIO:                                            â”‚
â”‚  "A tabela diz OK, o modal confirma que estÃ¡ tudo perfeito.           â”‚
â”‚   Consistente!"                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ CenÃ¡rios de Exemplo

### CenÃ¡rio 1: Tudo OK

**Input:**
```javascript
{
  lufs: -10.5,        // Range: -11.5 a -9.5  âœ… OK
  truePeak: -1.0,     // Range: -2.0 a -0.5   âœ… OK
  dr: 8.5,            // Range: 7.5 a 9.5     âœ… OK
  bands: {
    sub: -28.5,       // Range: -32 a -25     âœ… OK
    low_bass: -28,    // Range: -31 a -25     âœ… OK
    // ... todas OK
  }
}
```

**Atual (BUG):**
- suggestions.length = 8-12
- Modal exibe 8-12 cards "Ideal"

**Corrigido:**
- suggestions.length = 0
- Modal exibe: "ğŸ‰ Sua mixagem estÃ¡ perfeita!"

---

### CenÃ¡rio 2: 1 Problema

**Input:**
```javascript
{
  lufs: -10.5,        // âœ… OK
  truePeak: -1.0,     // âœ… OK
  dr: 8.5,            // âœ… OK
  bands: {
    sub: -28.5,       // âœ… OK
    low_bass: -35,    // Range: -31 a -25  âŒ FORA (-4 dB abaixo)
    // ... outras OK
  }
}
```

**Atual (BUG):**
- suggestions.length = 8-12 (7 OK + 1 CRITICAL)
- Modal exibe 8-12 cards (7 verdes + 1 vermelho)

**Corrigido:**
- suggestions.length = 1
- Modal exibe:
  - 1 card vermelho: "ğŸ”´ Grave (60-250 Hz): EstÃ¡ -4 dB abaixo do mÃ­nimo..."

---

### CenÃ¡rio 3: Mix ProblemÃ¡tico

**Input:**
```javascript
{
  lufs: -8.0,         // Range: -11.5 a -9.5  âŒ FORA (+1.5 dB acima)
  truePeak: -0.2,     // Range: -2.0 a -0.5   âŒ FORA (+0.3 dB acima)
  dr: 5.0,            // Range: 7.5 a 9.5     âŒ FORA (-2.5 dB abaixo)
  bands: {
    sub: -28.5,       // âœ… OK
    low_bass: -35,    // âŒ FORA
    upper_bass: -22,  // âŒ FORA
    low_mid: -30,     // âœ… OK
    mid: -32,         // âœ… OK
    high_mid: -50,    // âŒ FORA
  }
}
```

**Atual (BUG):**
- suggestions.length = 10 (4 OK + 6 problemas)
- Modal exibe 10 cards misturados

**Corrigido:**
- suggestions.length = 6 (APENAS problemas)
- Modal exibe:
  - ğŸ”´ LUFS: +1.5 dB acima
  - ğŸ”´ True Peak: risco de clipping
  - ğŸ”´ DR: -2.5 dB abaixo
  - ğŸ”´ Grave: -4 dB abaixo
  - ğŸ”´ Grave Alto: +5 dB acima
  - ğŸ”´ MÃ©dio-agudo: -12 dB abaixo

---

## ğŸ“ Pontos-Chave da SoluÃ§Ã£o

1. **Gate no Backend (5 locais):**
   ```javascript
   if (severity.level !== 'ok') {
     suggestions.push(suggestion);
   }
   ```

2. **Frontend nÃ£o muda:**
   - Continua renderizando `analysis.suggestions`
   - Mas agora recebe array filtrado

3. **BenefÃ­cios:**
   - âœ… ConsistÃªncia garantida (backend = fonte de verdade)
   - âœ… Performance (payload reduzido)
   - âœ… UX melhorada (foco em problemas reais)
   - âœ… FÃ¡cil de testar

4. **Risco:** BAIXO
   - MudanÃ§a cirÃºrgica
   - NÃ£o afeta cÃ¡lculos
   - NÃ£o quebra AI enrichment
   - CompatÃ­vel com modo referÃªncia
