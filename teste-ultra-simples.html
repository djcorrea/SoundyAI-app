<!DOCTYPE html>
<html>
<head><title>Teste Ultra Simples</title></head>
<body>
<h1>Teste Ultra Simples</h1>
<div id="result">Carregando...</div>

<script>
// Código inline para testar sem dependências
console.log('=== TESTE INLINE ===');

// Classe de teste mínima
class TestSystem {
    process(analysis, reference) {
        const suggestions = [];
        
        // LUFS simples
        if (analysis?.technicalData?.lufs && reference?.lufs_target) {
            const delta = analysis.technicalData.lufs - reference.lufs_target;
            if (Math.abs(delta) > (reference.tol_lufs || 1.0)) {
                suggestions.push({
                    metric: 'lufs',
                    measured: analysis.technicalData.lufs,
                    target: reference.lufs_target,
                    delta: delta,
                    direction: delta > 0 ? 'reduce' : 'increase',
                    problem: `Volume ${delta > 0 ? 'muito alto' : 'muito baixo'} (${analysis.technicalData.lufs.toFixed(1)} LUFS)`,
                    explanation: `Você está em ${analysis.technicalData.lufs.toFixed(1)} LUFS, mas o ideal para ${reference.genre || 'este gênero'} é ${reference.lufs_target.toFixed(1)} LUFS.`,
                    solution: `${delta > 0 ? 'Reduzir' : 'Aumentar'} o volume em ${Math.abs(delta).toFixed(1)} LUFS usando um limitador.`
                });
            }
        }
        
        return { suggestions };
    }
}

// Teste direto
const testSystem = new TestSystem();
const testData = {
    technicalData: { lufs: -6.0 },
};
const testRef = {
    genre: 'trance',
    lufs_target: -9.0,
    tol_lufs: 1.0
};

const result = testSystem.process(testData, testRef);
console.log('Resultado teste:', result);

document.getElementById('result').innerHTML = `
    <h2>Resultado:</h2>
    <p>Sugestões encontradas: ${result.suggestions.length}</p>
    ${result.suggestions.map(s => `
        <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
            <strong>${s.metric.toUpperCase()}</strong><br>
            <strong>Problema:</strong> ${s.problem}<br>
            <strong>Explicação:</strong> ${s.explanation}<br>
            <strong>Solução:</strong> ${s.solution}
        </div>
    `).join('')}
`;
</script>
</body>
</html>