{
  "$schema": "https://railway.app/railway.schema.json",
  "_comment": "⚠️ DO NOT CHANGE nodeVersion! This project requires Node 20. DO NOT add NODE_VERSION or NIXPACKS_NODE_VERSION variables to services - they override this config.",
  "build": {
    "nodeVersion": "20"
  },
  "environments": {
    "web": {
      "build": {
        "builder": "NIXPACKS"
      },
      "deploy": {
        "startCommand": "node work/server.js",
        "healthcheckPath": "/health",
        "healthcheckTimeout": 60,
        "restartPolicyType": "ON_FAILURE",
        "restartPolicyMaxRetries": 5
      }
    },
    "worker": {
      "build": {
        "builder": "NIXPACKS"
      },
      "deploy": {
        "startCommand": "node work/worker-redis.js",
        "healthcheckPath": "/health",
        "healthcheckTimeout": 120,
        "restartPolicyType": "ON_FAILURE",
        "restartPolicyMaxRetries": 10
      }
    }
  }
}