üîó [DB] Singleton PostgreSQL Pool criado - Max: 2 conex√µes
(node:20540) NOTE: The AWS SDK for JavaScript (v2) is in maintenance mode.
 SDK releases are limited to address critical bug fixes and security issues only.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check the blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
üöÄ [API] SoundyAI API rodando na porta 3000
üèóÔ∏è [API] Arquitetura: Redis Workers Only
üìç [API] Endpoints: /api/audio/analyze, /api/jobs/:id, /health
üîó [API] CORS configurado para produ√ß√£o e desenvolvimento
üü¢ [REDIS] Conectado ao Upstash Redis
‚úÖ [REDIS] Conex√£o pronta para uso
üåê [API] GET /health - 2025-10-27T01:38:06.596Z
üßπ [REDIS] Limpeza inteligente executada - fila otimizada
üåê [API] POST /api/audio/analyze - 2025-10-27T01:53:44.440Z
[ANALYZE] Nova requisi√ß√£o de cria√ß√£o de job iniciada
[ANALYZE] Feature flags: {
  REFERENCE_MODE_ENABLED: true,
  FALLBACK_TO_GENRE: true,
  DEBUG_REFERENCE_MODE: false
}
[ANALYZE] Dados recebidos: {
  fileKey: 'uploads/test_audio_sample.wav',
  mode: 'genre',
  fileName: 'test_sample.wav'
}
[ANALYZE] Criando job: b65b1c51-27d2-434e-bfa9-43537b32fd12 para fileKey: uploads/test_audio_sample.wav, modo: genre
[ANALYZE] Erro ao criar job no banco: AggregateError [ECONNREFUSED]: 
    at C:\Users\DJ Correa\Desktop\Programa√ß√£o\SoundyAI\work\node_modules\pg-pool\index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async createJobInDatabase (file:///C:/Users/DJ%20Correa/Desktop/Programa%C3%A7%C3%A3o/SoundyAI/work/api/audio/analyze.js:90:20)
    at async file:///C:/Users/DJ%20Correa/Desktop/Programa%C3%A7%C3%A3o/SoundyAI/work/api/audio/analyze.js:221:23 {
  code: 'ECONNREFUSED',
  [errors]: [
    Error: connect ECONNREFUSED ::1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -4078,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432
    },
    Error: connect ECONNREFUSED 127.0.0.1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -4078,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432
    }
  ]
}
[ANALYZE] Erro na cria√ß√£o do job: Error: Erro ao criar job de an√°lise: 
    at createJobInDatabase (file:///C:/Users/DJ%20Correa/Desktop/Programa%C3%A7%C3%A3o/SoundyAI/work/api/audio/analyze.js:116:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///C:/Users/DJ%20Correa/Desktop/Programa%C3%A7%C3%A3o/SoundyAI/work/api/audio/analyze.js:221:23
üßπ [REDIS] Limpeza inteligente executada - fila otimizada
üîó [DB] Singleton PostgreSQL Pool criado - Max: 2 conex√µes
(node:17792) NOTE: The AWS SDK for JavaScript (v2) is in maintenance mode.
 SDK releases are limited to address critical bug fixes and security issues only.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check the blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
üöÄ [API] SoundyAI API rodando na porta 3000
üèóÔ∏è [API] Arquitetura: Redis Workers Only
üìç [API] Endpoints: /api/audio/analyze, /api/jobs/:id, /health
üîó [API] CORS configurado para produ√ß√£o e desenvolvimento
üü¢ [REDIS] Conectado ao Upstash Redis
‚úÖ [REDIS] Conex√£o pronta para uso
üåê [API] POST /api/audio/analyze - 2025-10-27T01:55:53.135Z
[ANALYZE] Nova requisi√ß√£o de cria√ß√£o de job iniciada
[ANALYZE] Feature flags: {
  REFERENCE_MODE_ENABLED: true,
  FALLBACK_TO_GENRE: true,
  DEBUG_REFERENCE_MODE: false
}
[ANALYZE] Dados recebidos: {
  fileKey: 'uploads/test_audio_sample.wav',
  mode: 'genre',
  fileName: 'test_sample.wav'
}
[ANALYZE] Criando job: 7f5daf1b-9c94-4a63-90d2-4c7451dcaa27 para fileKey: uploads/test_audio_sample.wav, modo: genre
[ANALYZE] Erro ao criar job no banco: AggregateError [ECONNREFUSED]: 
    at C:\Users\DJ Correa\Desktop\Programa√ß√£o\SoundyAI\work\node_modules\pg-pool\index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async createJobInDatabase (file:///C:/Users/DJ%20Correa/Desktop/Programa%C3%A7%C3%A3o/SoundyAI/work/api/audio/analyze.js:90:20)
    at async file:///C:/Users/DJ%20Correa/Desktop/Programa%C3%A7%C3%A3o/SoundyAI/work/api/audio/analyze.js:221:23 {
  code: 'ECONNREFUSED',
  [errors]: [
    Error: connect ECONNREFUSED ::1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -4078,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432
    },
    Error: connect ECONNREFUSED 127.0.0.1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -4078,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432
    }
  ]
}
[ANALYZE] Erro na cria√ß√£o do job: Error: Erro ao criar job de an√°lise: 
    at createJobInDatabase (file:///C:/Users/DJ%20Correa/Desktop/Programa%C3%A7%C3%A3o/SoundyAI/work/api/audio/analyze.js:116:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///C:/Users/DJ%20Correa/Desktop/Programa%C3%A7%C3%A3o/SoundyAI/work/api/audio/analyze.js:221:23
üîó [DB] Singleton PostgreSQL Pool criado - Max: 2 conex√µes
(node:19352) NOTE: The AWS SDK for JavaScript (v2) is in maintenance mode.
 SDK releases are limited to address critical bug fixes and security issues only.

Please migrate your code to use AWS SDK for JavaScript (v3).
For more information, check the blog post at https://a.co/cUPnyil
(Use `node --trace-warnings ...` to show where the warning was created)
üöÄ [API] SoundyAI API rodando na porta 3000
üèóÔ∏è [API] Arquitetura: Redis Workers Only
üìç [API] Endpoints: /api/audio/analyze, /api/jobs/:id, /health
üîó [API] CORS configurado para produ√ß√£o e desenvolvimento
üü¢ [REDIS] Conectado ao Upstash Redis
‚úÖ [REDIS] Conex√£o pronta para uso
üåê [API] POST /api/audio/analyze - 2025-10-27T01:56:19.623Z
[ANALYZE] Nova requisi√ß√£o de cria√ß√£o de job iniciada
[ANALYZE] Feature flags: {
  REFERENCE_MODE_ENABLED: true,
  FALLBACK_TO_GENRE: true,
  DEBUG_REFERENCE_MODE: false
}
[ANALYZE] Dados recebidos: {
  fileKey: 'uploads/test_audio_sample.wav',
  mode: 'genre',
  fileName: 'test_sample.wav'
}
[ANALYZE] Criando job: fefb0e79-14bb-4ef3-acd1-ce0684bbfe07 para fileKey: uploads/test_audio_sample.wav, modo: genre
[ANALYZE] üß™ MODO MOCK/DEBUG - Job simulado criado com sucesso
[ANALYZE] üìã Job fefb0e79-14bb-4ef3-acd1-ce0684bbfe07 enfileirado no Redis (modo mock/debug)
[ANALYZE] Job criado em 58ms - jobId: fefb0e79-14bb-4ef3-acd1-ce0684bbfe07, modo: genre
üåê [API] GET /api/jobs/fefb0e79-14bb-4ef3-acd1-ce0684bbfe07 - 2025-10-27T01:56:24.706Z
‚ùå Erro ao buscar job: AggregateError [ECONNREFUSED]: 
    at C:\Users\DJ Correa\Desktop\Programa√ß√£o\SoundyAI\work\node_modules\pg-pool\index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///C:/Users/DJ%20Correa/Desktop/Programa%C3%A7%C3%A3o/SoundyAI/work/api/jobs/%5Bid%5D.js:12:22 {
  code: 'ECONNREFUSED',
  [errors]: [
    Error: connect ECONNREFUSED ::1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -4078,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432
    },
    Error: connect ECONNREFUSED 127.0.0.1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -4078,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432
    }
  ]
}
üßπ [REDIS] Limpeza inteligente executada - fila otimizada
üßπ [REDIS] Limpeza inteligente executada - fila otimizada
üßπ [REDIS] Limpeza inteligente executada - fila otimizada
üßπ [REDIS] Limpeza inteligente executada - fila otimizada
üßπ [REDIS] Limpeza inteligente executada - fila otimizada
