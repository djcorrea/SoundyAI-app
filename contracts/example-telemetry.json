{
  "timestamp": "2025-10-16T12:34:56.789Z",
  "jobId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "fileName": "techno-club-001.wav",
  "engineVersion": "granular_v1",
  "input": {
    "duration_s": 214.3,
    "sampleRate": 48000,
    "channels": 2,
    "fileSizeBytes": 20643840,
    "format": "wav",
    "bitDepth": 16
  },
  "pipeline": {
    "phases": {
      "5.1_decode": {
        "durationMs": 1234,
        "method": "ffmpeg",
        "status": "completed"
      },
      "5.2_segment": {
        "durationMs": 567,
        "framesFFT": 1028,
        "framesRMS": 2056,
        "fftSize": 4096,
        "hopSize": 1024,
        "windowType": "hann",
        "status": "completed"
      },
      "5.3_core_metrics": {
        "durationMs": 4321,
        "status": "completed",
        "subsystems": {
          "lufs": { "durationMs": 890, "status": "completed" },
          "truePeak": { "durationMs": 1234, "status": "completed" },
          "dynamics": { "durationMs": 567, "status": "completed" },
          "stereo": { "durationMs": 234, "status": "completed" },
          "fft": { "durationMs": 890, "status": "completed" },
          "spectralBands": { "durationMs": 506, "status": "completed" }
        }
      },
      "5.4_json_output": {
        "durationMs": 123,
        "status": "completed"
      }
    },
    "totalDurationMs": 8234
  },
  "lufs": {
    "integrated": -10.2,
    "shortTerm": -9.8,
    "momentary": -9.5,
    "lra": 6.8,
    "originalLUFS": -10.2,
    "normalizedTo": -23.0,
    "gainAppliedDB": -12.8,
    "gainAppliedLinear": 0.229,
    "standard": "ITU-R BS.1770-4",
    "gatingInfo": {
      "absoluteThreshold": -70.0,
      "relativeThreshold": -10.0,
      "blocksProcessed": 535,
      "blocksGated": 48
    }
  },
  "truePeak": {
    "maxDbtp": -1.3,
    "maxLinear": 0.862,
    "samplePeakLeftDb": -1.5,
    "samplePeakRightDb": -1.4,
    "clippingSamples": 0,
    "clippingPct": 0.0,
    "method": "ffmpeg_ebur128_4x",
    "oversampling": 4
  },
  "dynamics": {
    "dynamicRange": 12.4,
    "crestFactor": 14.7,
    "peakRmsDb": -8.5,
    "averageRmsDb": -21.2,
    "drCategory": "moderate",
    "method": "tt_dr_corrected",
    "windowSizeMs": 300,
    "hopSizeMs": 100,
    "percentiles": {
      "p10": -8.5,
      "p90": -23.7
    }
  },
  "stereo": {
    "correlation": 0.88,
    "width": 0.65,
    "balance": 0.02,
    "isMonoCompatible": true,
    "hasPhaseIssues": false,
    "correlationCategory": "good_stereo",
    "widthCategory": "balanced"
  },
  "spectral": {
    "centroidHz": 2456.3,
    "rolloffHz": 8234.1,
    "bandwidthHz": 6123.4,
    "spreadHz": 1234.5,
    "flatness": 0.23,
    "crest": 1.45,
    "skewness": 0.34,
    "kurtosis": 2.89,
    "algorithm": "8_metrics_complete"
  },
  "spectralBands": {
    "algorithm": "granular_v1",
    "referenceGenre": "techno",
    "schemaVersion": 1,
    "lufsNormalization": true,
    "framesProcessed": 1028,
    "aggregationMethod": "median",
    "groups": {
      "sub": { "status": "yellow", "score": 1.0, "subBandsCount": 2 },
      "bass": { "status": "green", "score": 0.0, "subBandsCount": 3 },
      "low_mid": { "status": "green", "score": 0.0, "subBandsCount": 2 },
      "mid": { "status": "red", "score": 2.6, "subBandsCount": 2 },
      "high_mid": { "status": "green", "score": 0.0, "subBandsCount": 2 },
      "presence": { "status": "yellow", "score": 1.2, "subBandsCount": 1 },
      "air": { "status": "green", "score": 0.0, "subBandsCount": 1 }
    },
    "subBandsTotal": 13,
    "subBandsIdeal": 9,
    "subBandsAdjust": 2,
    "subBandsFix": 2
  },
  "scoring": {
    "method": "equal_weight_v3",
    "score": 74,
    "scorePct": 74,
    "classification": "Bom",
    "breakdown": {
      "lufs": { "score": 85, "weight": 1.0, "contribution": 85 },
      "truePeak": { "score": 90, "weight": 1.0, "contribution": 90 },
      "dynamicRange": { "score": 78, "weight": 1.0, "contribution": 78 },
      "lra": { "score": 82, "weight": 1.0, "contribution": 82 },
      "stereoCorrelation": { "score": 88, "weight": 1.0, "contribution": 88 },
      "spectralCentroid": { "score": 72, "weight": 1.0, "contribution": 72 },
      "frequencyBands": { "score": 45, "weight": 1.0, "contribution": 45 }
    },
    "penalties": {
      "clipping": 0,
      "phaseIssues": 0,
      "tooLoud": 0,
      "tooQuiet": 0
    },
    "reference": {
      "genre": "techno",
      "lufsTarget": -18.0,
      "truePeakTarget": -11.2,
      "drTarget": 12.7,
      "lraTarget": 6.6,
      "stereoTarget": 0.88
    }
  },
  "suggestions": {
    "count": 3,
    "highPriority": 2,
    "mediumPriority": 1,
    "lowPriority": 0,
    "items": [
      {
        "priority": "high",
        "freq_range": [40, 60],
        "type": "boost",
        "amount": 2.5,
        "metric": "frequency_balance",
        "deviation": -3.1,
        "message": "Falta energia em 40–60 Hz — reforçar ~2.5 dB (harmônicos do kick)."
      },
      {
        "priority": "high",
        "freq_range": [1000, 2000],
        "type": "cut",
        "amount": 3.0,
        "metric": "frequency_balance",
        "deviation": 3.5,
        "message": "Excesso em 1–2 kHz — reduzir ~3 dB (presença vocal pode estar mascarando outros elementos)."
      },
      {
        "priority": "medium",
        "freq_range": [5000, 10000],
        "type": "boost",
        "amount": 1.8,
        "metric": "frequency_balance",
        "deviation": -2.2,
        "message": "Falta energia em 5–10 kHz — reforçar ~1.8 dB (brilho/crash/hats)."
      }
    ]
  },
  "granular": {
    "count": 13,
    "stepHz": 20,
    "aggregationMethod": "median_multi_frame",
    "details": [
      {
        "id": "sub_low",
        "range": [20, 40],
        "energyDb": -28.3,
        "target": -28.0,
        "toleranceSigma": 1.5,
        "deviation": -0.3,
        "deviationSigmas": 0.2,
        "status": "ideal"
      },
      {
        "id": "sub_high",
        "range": [40, 60],
        "energyDb": -32.1,
        "target": -29.0,
        "toleranceSigma": 1.5,
        "deviation": -3.1,
        "deviationSigmas": 2.07,
        "status": "adjust"
      },
      {
        "id": "mid_high",
        "range": [1000, 2000],
        "energyDb": -29.5,
        "target": -33.0,
        "toleranceSigma": 1.5,
        "deviation": 3.5,
        "deviationSigmas": 2.33,
        "status": "fix"
      }
    ]
  },
  "warnings": [],
  "errors": [],
  "debug": {
    "workerHealthy": true,
    "lastHealthCheck": "2025-10-16T12:34:50.000Z",
    "memoryUsageMB": 234.5,
    "cpuUsagePercent": 45.2,
    "tempFilesCleanedUp": true
  }
}
