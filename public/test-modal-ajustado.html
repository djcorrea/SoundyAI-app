<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Modal Ajustado - Tamanho e T√≠tulo</title>
    <!-- ‚úÖ CRITICAL: Logger DEVE ser o primeiro script carregado -->
    <script src="logger.js"></script>
    

    <link rel="stylesheet" href="audio-analyzer.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #0c111b 0%, #1a1f2e 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            padding: 40px 20px;
        }
        
        .test-btn {
            background: linear-gradient(135deg, #249dff, #1976d2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 18px;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(36, 157, 255, 0.3);
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: rgba(255, 255, 255, 0.02);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .comparison-item h4 {
            color: #4fc3f7;
            margin-top: 0;
        }
        
        .status {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 8px;
            margin: 5px;
            font-weight: bold;
        }
        
        .status.success { background: rgba(0, 255, 0, 0.2); color: #00ff00; }
        .status.error { background: rgba(255, 0, 0, 0.2); color: #ff6b6b; }
        .status.info { background: rgba(0, 150, 255, 0.2); color: #4fc3f7; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîß Teste dos Ajustes do Modal</h1>
        <p>Esta p√°gina testa os ajustes de tamanho, t√≠tulo e √≠cone do modal de sele√ß√£o de modo.</p>
        
        <div class="test-section">
            <h2>üß™ Teste Visual</h2>
            
            <button class="test-btn" onclick="openTestModal()">
                üéß Abrir Modal Ajustado
            </button>
            
            <button class="test-btn" onclick="toggleReferenceMode()">
                üîÑ Mostrar/Ocultar Modo Refer√™ncia
            </button>
            
            <button class="test-btn" onclick="testResponsiveness()">
                üì± Testar Responsividade
            </button>
        </div>
        
        <div class="test-section">
            <h2>‚úÖ Checklist de Verifica√ß√£o</h2>
            <div class="comparison">
                <div class="comparison-item">
                    <h4>ANTES dos Ajustes</h4>
                    <ul style="text-align: left;">
                        <li>Modal com max-height 70vh</li>
                        <li>Poss√≠vel scroll interno</li>
                        <li>√çcone üéµ quebrado no t√≠tulo</li>
                        <li>T√≠tulo com fonte menor</li>
                        <li>Sem efeito glitch</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4>DEPOIS dos Ajustes</h4>
                    <ul style="text-align: left;">
                        <li>Modal com max-height 90vh</li>
                        <li>Overflow hidden (sem scroll)</li>
                        <li>√çcone üéß perfeito e alinhado</li>
                        <li>T√≠tulo maior (2.4rem)</li>
                        <li>Efeito glitch sutil ativo</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>üéØ Pontos de Verifica√ß√£o</h2>
            <ol style="text-align: left;">
                <li><strong>Tamanho:</strong> Modal ocupa at√© 90% da altura sem scroll</li>
                <li><strong>T√≠tulo:</strong> Fonte Orbitron, tamanho 2.4rem, efeito glitch</li>
                <li><strong>√çcone:</strong> üéß bem alinhado e sem quebras</li>
                <li><strong>Layout:</strong> Conte√∫do centralizado verticalmente</li>
                <li><strong>Responsivo:</strong> Ajusta bem em mobile</li>
                <li><strong>Funcional:</strong> Todos os cliques funcionam</li>
            </ol>
        </div>
        
        <div class="test-section">
            <h2>üìä Status dos Componentes</h2>
            <div id="statusContainer">
                <span class="status info">Verificando...</span>
            </div>
        </div>
    </div>

    <!-- Modal de teste -->
    <div id="analysisModeModal" class="audio-modal" style="display: none;">
        <div class="audio-modal-content mode-selection-modal">
            <div class="audio-modal-header">
                <h3 class="glitch" data-text="COMO DESEJA ANALISAR SUA M√öSICA?">
                    <span class="icon">üéß</span>
                    COMO DESEJA ANALISAR SUA M√öSICA?
                </h3>
                <button class="audio-modal-close" onclick="closeTestModal()">&times;</button>
            </div>
            
            <div class="mode-selection-container">
                <div class="mode-selection-description">
                    <p>Escolha o tipo de an√°lise que melhor se adequa √†s suas necessidades:</p>
                </div>
                
                <div class="mode-selection-options">
                    <!-- Op√ß√£o: An√°lise por G√™nero (atual) -->
                    <button class="mode-option-btn" id="genreModeBtn" onclick="testGenreMode()">
                        <div class="mode-option-left">
                            <div class="mode-option-icon">üéß</div>
                            <div class="mode-option-content">
                                <h4>Por G√™nero Musical</h4>
                                <p>Compare sua m√∫sica com padr√µes profissionais do g√™nero selecionado</p>
                                <span class="mode-option-badge">Recomendado</span>
                            </div>
                        </div>
                        <div class="mode-option-right">‚Üí</div>
                    </button>
                    
                    <!-- Op√ß√£o: An√°lise por Refer√™ncia (novo) -->
                    <button class="mode-option-btn" id="referenceModeBtn" onclick="testReferenceMode()" 
                            style="display: none;">
                        <div class="mode-option-left">
                            <div class="mode-option-icon">üéØ</div>
                            <div class="mode-option-content">
                                <h4>Por M√∫sica de Refer√™ncia</h4>
                                <p>Compare sua m√∫sica diretamente com uma faixa de refer√™ncia espec√≠fica</p>
                                <span class="mode-option-badge new">Novo</span>
                            </div>
                        </div>
                        <div class="mode-option-right">‚Üí</div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openTestModal() {
            const modal = document.getElementById('analysisModeModal');
            modal.style.display = 'flex';
            log('‚úÖ Modal aberto para teste de ajustes');
            
            // Verificar se tem scroll
            const modalContent = modal.querySelector('.mode-selection-modal');
            const hasScroll = modalContent.scrollHeight > modalContent.clientHeight;
            
            log('üìè Scroll detectado:', hasScroll ? 'SIM (precisa ajustar)' : 'N√ÉO (correto)');
            updateStatus();
        }

        function closeTestModal() {
            const modal = document.getElementById('analysisModeModal');
            modal.style.display = 'none';
            log('‚ùå Modal fechado');
        }

        function toggleReferenceMode() {
            const referenceBtn = document.getElementById('referenceModeBtn');
            if (referenceBtn.style.display === 'none') {
                referenceBtn.style.display = 'block';
                log('üëÅÔ∏è Modo Refer√™ncia vis√≠vel');
            } else {
                referenceBtn.style.display = 'none';
                log('üôà Modo Refer√™ncia oculto');
            }
        }

        function testResponsiveness() {
            const modal = document.getElementById('analysisModeModal');
            modal.style.display = 'flex';
            
            // Simular diferentes tamanhos
            const sizes = [
                { width: '768px', label: 'Tablet' },
                { width: '480px', label: 'Mobile' },
                { width: '320px', label: 'Mobile Pequeno' },
                { width: '100%', label: 'Desktop' }
            ];
            
            let currentSize = 0;
            const interval = setInterval(() => {
                if (currentSize < sizes.length) {
                    const size = sizes[currentSize];
                    document.body.style.width = size.width;
                    log(`üì± Testando: ${size.label} (${size.width})`);
                    currentSize++;
                } else {
                    document.body.style.width = '100%';
                    clearInterval(interval);
                    log('‚úÖ Teste de responsividade conclu√≠do');
                }
            }, 2000);
        }

        function testGenreMode() {
            alert('üéß Modo G√™nero Musical selecionado!\n\nTeste funcionando corretamente.');
            closeTestModal();
        }

        function testReferenceMode() {
            alert('üéØ Modo Refer√™ncia selecionado!\n\nTeste funcionando corretamente.');
            closeTestModal();
        }

        function updateStatus() {
            const statusContainer = document.getElementById('statusContainer');
            const modal = document.getElementById('analysisModeModal');
            const statuses = [];

            // Verificar se modal existe
            if (modal) {
                statuses.push('<span class="status success">Modal HTML ‚úì</span>');
            } else {
                statuses.push('<span class="status error">Modal HTML ‚úó</span>');
            }

            // Verificar estilo do t√≠tulo
            const title = modal?.querySelector('h3.glitch');
            if (title) {
                statuses.push('<span class="status success">T√≠tulo Glitch ‚úì</span>');
            } else {
                statuses.push('<span class="status error">T√≠tulo Glitch ‚úó</span>');
            }

            // Verificar √≠cone
            const icon = modal?.querySelector('.icon');
            if (icon) {
                statuses.push('<span class="status success">√çcone Separado ‚úì</span>');
            } else {
                statuses.push('<span class="status error">√çcone Separado ‚úó</span>');
            }

            // Verificar overflow
            const modalContent = modal?.querySelector('.mode-selection-modal');
            if (modalContent) {
                const style = getComputedStyle(modalContent);
                if (style.overflowY === 'hidden') {
                    statuses.push('<span class="status success">Overflow Hidden ‚úì</span>');
                } else {
                    statuses.push('<span class="status error">Overflow Hidden ‚úó</span>');
                }
            }

            statusContainer.innerHTML = statuses.join(' ');
        }

        // Fechar modal com ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeTestModal();
            }
        });

        // Fechar modal clicando fora
        document.getElementById('analysisModeModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeTestModal();
            }
        });

        // Atualizar status quando carregar
        setTimeout(updateStatus, 500);

        log('üß™ P√°gina de teste dos ajustes carregada!');
    </script>
</body>
</html>