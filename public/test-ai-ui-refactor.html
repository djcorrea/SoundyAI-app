<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste AI-UI Refactor - SoundyAI</title>
    <link rel="stylesheet" href="audio-analyzer.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: var(--ai-bg);
            color: var(--ai-text);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-button {
            background: var(--ai-primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--ai-radius);
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: all 0.2s;
        }
        
        .test-button:hover {
            background: var(--ai-cyan);
            transform: translateY(-2px);
            box-shadow: var(--ai-shadow);
        }
        
        .preview-area {
            background: var(--ai-panel);
            border: 1px solid rgba(124, 77, 255, 0.3);
            border-radius: var(--ai-radius);
            padding: 20px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üöÄ Teste: AI-UI Refactor da An√°lise de √Åudio</h1>
        
        <div>
            <button class="test-button" onclick="testScoreCard()">Testar Score Card</button>
            <button class="test-button" onclick="testTooltips()">Testar Tooltips</button>
            <button class="test-button" onclick="testSuggestions()">Testar Sugest√µes</button>
            <button class="test-button" onclick="testResponsive()">Testar Responsivo</button>
            <button class="test-button" onclick="openActualModal()">Abrir Modal Real</button>
        </div>
        
        <div id="previewArea" class="preview-area">
            <p>üëÜ Use os bot√µes acima para testar os novos componentes da interface.</p>
        </div>
    </div>

    <script>
        // Mock data para testes
        const mockAnalysis = {
            qualityOverall: 87.5,
            metadata: { genre: 'funk_bruxaria' },
            technicalData: {
                lufsIntegrated: -14.2,
                truePeakDbtp: -1.3,
                dynamicRange: 8.5,
                stereoCorrelation: 0.25,
                stereoWidth: 0.65
            },
            scores: {
                final: 87.5,
                loudness: 92,
                frequencia: 85,
                estereo: 78,
                dinamica: 89,
                tecnico: 94,
                genre: 'funk_bruxaria'
            },
            suggestions: [
                {
                    message: "Ajustar graves para maior punch",
                    explanation: "Bass ligeiramente acima da refer√™ncia do g√™nero",
                    action: "Reduzir 60-150Hz em 2dB com EQ",
                    priority: "medium",
                    frequency_range: "60-150Hz",
                    adjustment_db: "-2"
                },
                {
                    message: "Otimizar din√¢mica",
                    explanation: "Dynamic range pode ser melhorado",
                    action: "Aplicar compress√£o sutil no master",
                    priority: "high"
                },
                {
                    message: "Ajuste fino dos agudos",
                    explanation: "Presence pode ter mais defini√ß√£o",
                    action: "Boost suave em 5-8kHz",
                    priority: "fine",
                    frequency_range: "5-8kHz",
                    adjustment_db: "+1.5"
                }
            ]
        };

        function testScoreCard() {
            const html = `
                <div class="ai-score-card">
                    <div class="ai-score-number">${mockAnalysis.qualityOverall}</div>
                    <div class="ai-score-legend">
                        G√™nero: ${mockAnalysis.metadata.genre} ‚Ä¢ Pondera√ß√£o adaptativa
                        <span style="margin-left: 8px; padding: 2px 6px; background: rgba(45, 214, 135, 0.2); color: var(--ai-success); border-radius: 4px; font-size: 11px;">refer√™ncias aplicadas</span>
                    </div>
                </div>
                
                <div class="ai-section-title">üèÜ An√°lise por Dimens√£o</div>
                <div class="ai-scores-breakdown">
                    <div class="data-row metric-with-progress">
                        <span class="label">üîä Loudness:</span>
                        <div class="metric-value-progress">
                            <span class="value" style="color: #00ff92; font-weight: bold;">${mockAnalysis.scores.loudness}</span>
                            <div class="progress-bar-mini">
                                <div class="progress-fill-mini" style="width: ${mockAnalysis.scores.loudness}%; background: #00ff92;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="data-row metric-with-progress">
                        <span class="label">üéµ Frequ√™ncia:</span>
                        <div class="metric-value-progress">
                            <span class="value" style="color: #00ff92; font-weight: bold;">${mockAnalysis.scores.frequencia}</span>
                            <div class="progress-bar-mini">
                                <div class="progress-fill-mini" style="width: ${mockAnalysis.scores.frequencia}%; background: #00ff92;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('previewArea').innerHTML = html;
        }

        function testTooltips() {
            const html = `
                <h3>üõà Teste de Tooltips Acess√≠veis</h3>
                <div class="data-row">
                    <span class="label">
                        Volume M√©dio
                        <span class="ai-tooltip-trigger" aria-describedby="tooltip_1">
                            üõà
                            <div id="tooltip_1" class="ai-tooltip" role="tooltip">Loudness integrado. Meta t√≠pica do g√™nero.</div>
                        </span>
                    </span>
                    <span class="value">-14.2 LUFS</span>
                </div>
                
                <div class="data-row">
                    <span class="label">
                        Pico M√°ximo
                        <span class="ai-tooltip-trigger" aria-describedby="tooltip_2">
                            üõà
                            <div id="tooltip_2" class="ai-tooltip" role="tooltip">Maior pico do √°udio. Reduza para evitar distor√ß√£o.</div>
                        </span>
                    </span>
                    <span class="value">-1.3 dBTP</span>
                </div>
                
                <p style="color: var(--ai-muted); font-size: 14px; margin-top: 20px;">
                    üí° Passe o mouse sobre os √≠cones üõà para ver as explica√ß√µes.
                </p>
            `;
            document.getElementById('previewArea').innerHTML = html;
        }

        function testSuggestions() {
            const html = `
                <div class="ai-suggestions">
                    <div class="ai-section-title">üöÄ Sugest√µes Inteligentes</div>
                    <div class="ai-cards-grid">
                        ${mockAnalysis.suggestions.map(sug => {
                            const priority = sug.priority || 'fine';
                            const priorityClass = `priority-${priority === 'high' ? 'critical' : priority === 'medium' ? 'important' : 'fine'}`;
                            const priorityLabel = priority === 'high' ? 'Priorit√°ria' : priority === 'medium' ? 'Importante' : 'Ajuste fino';
                            
                            return `
                                <div class="ai-suggestion-card ${priorityClass}">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                        <strong>${sug.message}</strong>
                                        <span class="ai-freq-status ${priority === 'high' ? 'error' : priority === 'medium' ? 'warning' : 'ok'}">${priorityLabel}</span>
                                    </div>
                                    <div style="margin-bottom: 8px; color: var(--ai-muted);">
                                        <strong>Problema:</strong> ${sug.explanation}
                                    </div>
                                    <div style="color: var(--ai-text);">
                                        <strong>Solu√ß√£o:</strong> ${sug.action}
                                    </div>
                                    ${sug.frequency_range ? `<div style="margin-top: 8px; font-size: 11px; color: var(--ai-cyan);">üìä Faixa: ${sug.frequency_range}</div>` : ''}
                                    ${sug.adjustment_db ? `<div style="margin-top: 4px; font-size: 11px; color: var(--ai-cyan);">üéõÔ∏è Ajuste: ${sug.adjustment_db} dB</div>` : ''}
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
            document.getElementById('previewArea').innerHTML = html;
        }

        function testResponsive() {
            const html = `
                <h3>üì± Teste de Responsividade</h3>
                <p>Redimensione a janela para ver o comportamento responsivo:</p>
                
                <div class="ai-cards-grid" style="margin-top: 20px;">
                    <div class="ai-freq-card">
                        <strong>Sub (20-60Hz)</strong>
                        <span class="ai-freq-status ok">‚úÖ</span>
                        <div>-17.3 dB</div>
                    </div>
                    <div class="ai-freq-card">
                        <strong>Bass (60-150Hz)</strong>
                        <span class="ai-freq-status warning">‚ö†Ô∏è</span>
                        <div>-12.8 dB</div>
                    </div>
                    <div class="ai-freq-card">
                        <strong>Mid (500Hz-2kHz)</strong>
                        <span class="ai-freq-status error">‚ùå</span>
                        <div>-8.2 dB</div>
                    </div>
                </div>
                
                <p style="color: var(--ai-muted); font-size: 14px; margin-top: 20px;">
                    üìê Em mobile: 1 coluna | Tablet: 2 colunas | Desktop: 3 colunas
                </p>
            `;
            document.getElementById('previewArea').innerHTML = html;
        }

        function openActualModal() {
            if (typeof openAudioModal === 'function') {
                openAudioModal();
            } else {
                alert('Modal real n√£o dispon√≠vel nesta p√°gina de teste. V√° para o index.html principal.');
            }
        }

        // Inicializar com score card
        window.addEventListener('DOMContentLoaded', testScoreCard);
    </script>
</body>
</html>